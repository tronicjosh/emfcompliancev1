I am doing a mechatronic engineering Skripsie (Thesis). I want you to act as my senior developer, we are collaborating partners. I want you to try to explain what it is you are doing so that I can have a comprehensive understanding of the changes you make as well as the entire system. The brief that was provided is as follows:

Implementation of a fast EMF safety analysis software utility

Reference: DLUDIC1
Supervisor: Dr Danie Ludick
Can be completed in first semester: No
Students allowed for this topic: 1
Student already assigned: None
Direction: Mechatronic
Required elective: None

Description:

EMF safety analysis is becoming very important as the number of mobile base stations (MBS) is expanded (especially with the increased rollout of 5G technology). As part of an international effort to ensure health and safety, groups such as ICNIRP and the FCC have set out clear regulations on non-ionizing radiation.

This project will focus on developing a fast and accurate electromagnetic field (EMF) analysis tool that can calculate the power density (normalised to the corresponding safety limit) around an arbitrary number of MBS antennas. The software utility, written in an object-oriented language such as C++, will receive as input the radiation patterns of the MBS antennas and then, using suitable formulas, calculate the field strength (and corresponding power densities) on a defined 2D planar grid.

Visualization of this field distribution on the 2D grid also forms part of this project. In addition, multi-core processing could be used to ensure that results are generated efficiently. The results will be verified against those generated by commercial computational electromagnetic tools such as FEKO and IXUS.

Key modules (Scientific and Engineering Knowledge):
Data Analytics (Eng) 344 | Modelling (334)

I want to do this project in C++ to create all the data files and use python to illustrate it. It will be a usable web application where engineers can input data and computations will be done on the backend and the visualisations provided on the frontend.

I have created a technical sheet for this project:

Technical Sheet:

Project Title:
Electromagnetic Field (EMF) Exposure Mapping and Safety Compliance Analysis Tool

1. Project Objective
The objective of this project is to design and implement a software-based tool that evaluates electromagnetic field (EMF) exposure levels around radio-frequency (RF) transmitting antennas and assesses compliance with international safety standards.

The system aims to provide an intuitive visual and analytical platform that allows users to configure antenna parameters, simulate EMF propagation, and identify geographic regions where exposure limits may be exceeded.

2. Problem Definition

Telecommunication infrastructure such as base stations and antennas emit electromagnetic radiation that must comply with strict safety regulations (e.g. ICNIRP and FCC limits).

Current EMF compliance assessments are often:

-Expensive
-Performed using proprietary software
-Difficult to visualize for non-specialists

There is a need for an accessible, configurable tool that can:

-Model EMF exposure based on antenna parameters
-Visualize exposure levels spatially
-Assist engineers and regulators in safety assessment and planning

3. System Overview

The proposed system is a modular EMF analysis platform consisting of:

-A numerical EMF computation engine
-A configuration-driven simulation framework
-A visualization layer for spatial exposure mapping

The tool calculates electric field strength and/or power density over a defined area surrounding one or more antenna installations, each comprising multiple sector antennas and compares the results against regulatory exposure limits.

4. System Architecture

4.1 High-Level Architecture

User Configuration (YAML)
        â†“
EMF Computation Engine (C/C++)
        â†“
Processed Field Data
        â†“
Visualization & Analysis Layer (Python)
        â†“
Maps, Plots, Safety Reports

4.2 Module Description

4.2.1 Configuration Module

Reads antenna and simulation parameters from a configuration file
Enables easy reconfiguration without modifying source code

Parameters include:

Antenna position and height
Frequency of operation
Transmit power
Antenna gain and radiation pattern
Simulation area and resolution

4.2.2 EMF Computation Engine

Implemented in C or C++ for performance and numerical efficiency
Computes EMF quantities such as:
Electric field strength (V/m)
Power density (W/mÂ²)
Uses simplified propagation models suitable for safety estimation
Supports evaluation of multiple antennas per base station, each with independent radiation patterns, orientation, and transmit power.

4.2.3 Data Processing Layer

Converts raw numerical results into structured datasets
Performs threshold comparison against exposure limits
Identifies unsafe or non-compliant regions

4.2.4 Visualization Module

Implemented in Python
Displays results using:
Heatmaps
Contour plots
Geographic overlays
Highlights compliance and non-compliance zones

5. Inputs and Outputs

5.1 Inputs

Antenna parameters (frequency, power, gain, height)
Environmental parameters (ground level, observation plane)
Regulatory exposure limits
Simulation grid resolution

5.2 Outputs

Spatial EMF exposure maps
Numerical exposure values at specified points
Compliance classification (safe / unsafe)
Optional summary report for engineering review

6. Tools and Technologies

| Component       | Technology          |
| --------------- | ------------------- |
| EMF Solver      | C++                 |
| Configuration   | YAML                |
| Data Processing | Python              |
| Visualization   | Matplotlib / Plotly |
| Build System    | CMake               |
| Version Control | Git                 |


7. Assumptions and Constraints
Assumptions
Antenna radiation can be approximated using simplified models
Environmental effects such as reflections are not fully modeled
The tool is intended for preliminary safety analysis, not legal certification

Constraints
Limited availability of real antenna radiation data
Computational complexity must remain suitable for desktop execution
Accuracy is balanced against model simplicity

8. Expected Outcomes

A working EMF exposure simulation tool
Clear visualization of EMF safety zones
Demonstration of engineering modeling, software design, and analysis skills
A foundation for future expansion into terrain-aware or multi-antenna analysis

9. Physics of Electromagnetic Field Exposure Calculation

9.1 Electromagnetic Radiation from Antennas

Radio-frequency antennas radiate electromagnetic energy in the form of time-varying electric and magnetic fields. In the far-field region, these fields propagate as electromagnetic waves and can be characterized using simplified relationships derived from Maxwellâ€™s equations.

For safety assessment, the primary quantity of interest is the electric field strength ğ¸ (V/m) or equivalently the power density ğ‘† (W/mÂ²).

9.2 Far-Field Assumption

The analysis assumes that observation points lie in the far-field region of the antenna, where the field structure is stable and angularly dependent.

The far-field condition is approximated by:

ğ‘Ÿ â‰« (2D^2)/ğœ†

where:

r = distance from antenna
D = largest physical dimension of the antenna
Î» = wavelength

Under this assumption:

Electric and magnetic fields are orthogonal
Field magnitudes decay as 1/ğ‘Ÿ
Power density decays as 1/(ğ‘Ÿ^2)

9.3 Antenna Power and Gain

The antenna transmits power P(W), which is redistributed spatially according to its gain pattern.

The Equivalent Isotropically Radiated Power (EIRP) is defined as:
EIRP=Ptâ€‹â‹…G
where G is the antenna gain (linear scale)

9.4 Power Density Calculation

In free space, the power density at a distance r from an isotropic radiator is:

S(r) = EIRP/(Ï€4r^2)

This equation captures the inverse-square spreading of electromagnetic energy.
For directional antennas, the gain is direction-dependent:
S(r,Î¸,Ï•) = P*G/(Ï€4r^2)

Î¸,Ï• = angular coordinates relative to antenna orientation


9.5 Electric Field Strength

The power density is related to the electric field magnitude by:

S = ğ¸^2/ğœ‚

where:
ğœ‚â‰ˆ 377Î© is the intrinsic impedance of free space

Rearranging:

E(r,Î¸,Ï•)= squareroot(Î·â‹…S(r,Î¸,Ï•))
	â€‹

This provides a direct way to compute field strength from transmitted power.

9.6 Spatial Sampling and Grid Evaluation

To evaluate exposure over a geographic region, the area surrounding the antenna is discretized into a 2D or 3D grid.

For each grid point:

Distance to antenna is computed:

ğ‘Ÿ = square root((ğ‘¥âˆ’ğ‘¥0)^2+(ğ‘¦âˆ’ğ‘¦0)^2+(ğ‘§âˆ’ğ‘§0)^2)
Angular position relative to antenna boresight is determined.
Antenna gain G(Î¸,Ï•) is applied.
Power density and electric field strength are calculated.

This process produces a spatial field distribution suitable for visualization and compliance analysis.

9.7 Regulatory Exposure Limits

International EMF safety guidelines specify maximum permissible exposure (MPE) limits.

For example, ICNIRP limits for general public exposure in the RF range are expressed as maximum electric field strength:

Elimit(f)

or power density:

ğ‘†limit(ğ‘“)

The calculated field values are compared point-wise:

Compliance (ğ‘¥,ğ‘¦,ğ‘§)= {Safe, ğ¸ â‰¤ ğ¸limit
                    {Non-compliant  ğ¸ > ğ¸limit


9.8 Safety Zone Determination

Regions where exposure exceeds regulatory limits are identified and classified as restricted zones.

The boundary of the safety zone is defined by:

ğ¸(ğ‘Ÿ,ğœƒ,ğœ™)=ğ¸limit

Solving for r gives an intuitive understanding of how:

Higher transmit power increases unsafe radius
Higher antenna gain narrows unsafe regions directionally
Frequency affects permissible exposure levels


9.9 Modeling Assumptions and Limitations

The physics model assumes:

Free-space propagation
Far-field conditions
No reflections, diffraction, or terrain effects
These simplifications are appropriate for first-order safety estimation and provide transparent, interpretable results.
	â€‹

9.10 Engineering Interpretation

From an engineering perspective:
EM exposure is governed primarily by transmitted power, antenna gain, and distance
The inverse-square law dominates spatial decay
Safety compliance can be intuitively understood as a balance between power concentration and regulatory thresholds
This physics-based approach ensures that calculated results are both mathematically sound and physically interpretable.

9.11 Multi-Antenna Exposure Superposition (Compliance-Level)

For multiple antennas operating simultaneously, the total exposure at a point is obtained by linear superposition of power densities, consistent with regulatory practice for non-coherent sources.

For N antennas:

ğ‘†total(ğ‘¥,ğ‘¦,ğ‘§)=âˆ‘ğ‘†i(ğ‘¥,ğ‘¦,ğ‘§)

where each contribution is:

ğ‘†i(ğ‘¥,ğ‘¦,ğ‘§)=ğ‘ƒğºğ‘–(ğœƒ,ğœ™)/4ğœ‹ğ‘Ÿ^2

The corresponding total electric field magnitude is then computed conservatively as:

ğ¸total=squareroot(ğœ‚ğ‘†total)

This approach:

Assumes non-coherent sources
Avoids phase-sensitive interference modeling
Aligns with ICNIRP and FCC compliance methodologies

Normalisation to safety limits (VERY important for the brief)

Because different antennas may operate at different frequencies, compliance is evaluated using normalised exposure:

Exposure Index=âˆ‘Si/ğ‘†limit(ğ‘“i)


Compliance condition:

Exposure Index â‰¤1 â‡’ Compliant


Visual Interface:
Purpose of the Visual Interface

The visual interface serves as the primary interaction layer between the user and the EMF computation engine. Its purpose is to allow engineers to intuitively define base station configurations, position antennas spatially, and visualise electromagnetic exposure levels in a clear, interpretable manner.

The interface is designed for engineering workflows, prioritising clarity, configurability, and traceability of results rather than consumer-level simplicity.

High-Level Web Application Architecture
The system follows a frontendâ€“backend separation:
Web Frontend (UI)
        â†“
API Layer
        â†“
EMF Computation Engine (C++)
        â†“
Processed Data
        â†“
Visualization Rendering (Python / Web)

The frontend manages user interaction and visualisation
The backend performs all numerical EMF calculations
The frontend never performs EMF physics

This separation ensures correctness, performance, and maintainability.

Core Interface Concepts (Very Important)
1. Antenna-Centric Modelling (Atomic Unit)

The antenna is the fundamental modelling unit in the interface.

Each antenna is defined by:

Antenna type (model / radiation pattern)

Frequency band

Transmit power

Azimuth

Downtilt

Height above ground

Position (x, y or geographic coordinates)

Users do not define â€œfieldsâ€ or â€œcellsâ€ directly â€” they define antennas, and the system computes exposure.

2. Base Station as a Logical Container

A base station is a logical grouping of antennas.

Interface functionality includes:

Create / delete base stations

Assign multiple antennas to a base station

Move the entire base station spatially

Toggle individual antennas on/off

This reflects real-world deployments (e.g. Rain macro sites).

3. Optional Cell / Sector Grouping (UI-Level Only)

Cells (sectors) are treated as logical groupings, not physical emitters.

They exist to:

Organise antennas by sector (A, B, C)

Improve UI clarity

Match telecom terminology

They do not alter EMF physics.

Key UI Components
1. Antenna Library Panel

Allows users to select predefined antenna models.

Features:

List of antenna types (e.g. 700 MHz panel, 1800 MHz panel, 3.5 GHz panel)

Associated radiation pattern files

Manufacturer metadata (optional)

Preview of azimuth/elevation gain pattern

This ensures users do not manually input gain values incorrectly.

2. Base Station Configuration Panel

Allows users to:

Create a new base station

Name the site

Define tower height

Add multiple antennas to the site

Assign antennas to sectors (optional)

Each antenna entry exposes editable parameters:

Frequency

Transmit power

Azimuth

Downtilt

Height offset

3. Interactive Map View (Core Feature)

The map provides spatial context and interaction.

Capabilities:

Place base stations on a 2D map

Drag base stations to new locations

Visualise antenna orientations (sector arrows)

Display observation grid overlay

Zoom and pan

This mirrors the workflow used in commercial planning tools.

4. Simulation Control Panel

Allows users to:

Define grid resolution

Select evaluation plane height

Choose regulatory standard (ICNIRP / FCC)

Trigger EMF computation

Enable/disable individual antennas

Clear separation between configuration and execution prevents accidental misuse.

5. Exposure Visualisation Layer

Displays computed results as:

Heatmaps of electric field strength or power density

Normalised exposure index maps

Compliance / non-compliance regions

Safety boundary contours

Colour scales must be:

Physically meaningful

Normalised to exposure limits

Clearly labelled with units

6. Numerical Inspection Tools (Often Forgotten but Critical)

This is something you were missing, and examiners like it.

The interface should allow:

Clicking on a point to see numerical values:

Distance

Total exposure

Per-antenna contribution

Displaying worst-case exposure values

Exporting results (CSV / image)

This reinforces engineering credibility.

User Workflow (End-to-End)

Select antenna models from library

Create a base station

Add multiple antennas (per sector and band)

Set antenna orientations and power

Place base station on map

Define simulation parameters

Run EMF analysis

Inspect exposure maps and compliance results

This workflow mirrors real compliance studies.

Design Constraints and Principles

No physics calculations in the frontend

All visualisations must map directly to backend results

All inputs must be traceable and reproducible

UI must prevent physically invalid configurations where possible

Emphasis on interpretability over visual flair

UI flow:
Frontend (Streamlit)
  â””â”€â”€ user defines EVERYTHING:
        - antennas
        - powers / EIRP
        - positions
        - grid size
        - evaluation height
        - standard

Backend (C++)
  â””â”€â”€ receives a config
  â””â”€â”€ runs the physics
  â””â”€â”€ outputs:
        - results.csv
        - report.json

Frontend
  â””â”€â”€ reads outputs
  â””â”€â”€ visualises
  â””â”€â”€ allows download
